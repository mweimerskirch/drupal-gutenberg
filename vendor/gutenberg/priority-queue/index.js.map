{"version":3,"sources":["webpack://wp/webpack/bootstrap","webpack://wp/@wordpress/priority-queue/src/index.js"],"names":["requestIdleCallback","window","requestAnimationFrame","createQueue","waitingList","elementsMap","WeakMap","isRunning","runWaitingList","deadline","length","nextElement","shift","get","delete","timeRemaining","add","element","item","has","push","set","flush","index","indexOf","splice"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;ACnEA;AAAA;AAAA,IAAMA,mBAAmB,GAAGC,MAAM,CAACD,mBAAP,GAA6BC,MAAM,CAACD,mBAApC,GAA0DC,MAAM,CAACC,qBAA7F;AAEA;;;;;;;;;;;;;;;;;;;;;;;AAsBO,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAChC,MAAMC,WAAW,GAAG,EAApB;AACA,MAAMC,WAAW,GAAG,IAAIC,OAAJ,EAApB;AACA,MAAIC,SAAS,GAAG,KAAhB;;AAEA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAEC,QAAF,EAAgB;AACtC,OAAG;AACF,UAAKL,WAAW,CAACM,MAAZ,KAAuB,CAA5B,EAAgC;AAC/BH,iBAAS,GAAG,KAAZ;AACA;AACA;;AAED,UAAMI,WAAW,GAAGP,WAAW,CAACQ,KAAZ,EAApB;AACAP,iBAAW,CAACQ,GAAZ,CAAiBF,WAAjB;AACAN,iBAAW,CAACS,MAAZ,CAAoBH,WAApB;AACA,KATD,QASUF,QAAQ,IAAIA,QAAQ,CAACM,aAArB,IAAsCN,QAAQ,CAACM,aAAT,KAA2B,CAT3E;;AAWAf,uBAAmB,CAAEQ,cAAF,CAAnB;AACA,GAbD;;AAeA,MAAMQ,GAAG,GAAG,SAANA,GAAM,CAAEC,OAAF,EAAWC,IAAX,EAAqB;AAChC,QAAK,CAAEb,WAAW,CAACc,GAAZ,CAAiBF,OAAjB,CAAP,EAAoC;AACnCb,iBAAW,CAACgB,IAAZ,CAAkBH,OAAlB;AACA;;AACDZ,eAAW,CAACgB,GAAZ,CAAiBJ,OAAjB,EAA0BC,IAA1B;;AACA,QAAK,CAAEX,SAAP,EAAmB;AAClBA,eAAS,GAAG,IAAZ;AACAP,yBAAmB,CAAEQ,cAAF,CAAnB;AACA;AACD,GATD;;AAWA,MAAMc,KAAK,GAAG,SAARA,KAAQ,CAAEL,OAAF,EAAe;AAC5B,QAAK,CAAEZ,WAAW,CAACc,GAAZ,CAAiBF,OAAjB,CAAP,EAAoC;AACnC,aAAO,KAAP;AACA;;AAEDZ,eAAW,CAACS,MAAZ,CAAoBG,OAApB;AACA,QAAMM,KAAK,GAAGnB,WAAW,CAACoB,OAAZ,CAAqBP,OAArB,CAAd;AACAb,eAAW,CAACqB,MAAZ,CAAoBF,KAApB,EAA2B,CAA3B;AAEA,WAAO,IAAP;AACA,GAVD;;AAYA,SAAO;AACNP,OAAG,EAAHA,GADM;AAENM,SAAK,EAALA;AAFM,GAAP;AAIA,CA/CM","file":"./build/priority-queue/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/priority-queue/build-module/index.js\");\n","const requestIdleCallback = window.requestIdleCallback ? window.requestIdleCallback : window.requestAnimationFrame;\n\n/**\n * Creates a context-aware queue that only executes\n * the last task of a given context.\n *\n * @example\n *```js\n * import { createQueue } from '@wordpress/priority-queue';\n *\n * const queue = createQueue();\n *\n * // Context objects.\n * const ctx1 = {};\n * const ctx2 = {};\n *\n * // For a given context in the queue, only the last callback is executed.\n * queue.add( ctx1, () => console.log( 'This will be printed first' ) );\n * queue.add( ctx2, () => console.log( 'This won\\'t be printed' ) );\n * queue.add( ctx2, () => console.log( 'This will be printed second' ) );\n *```\n *\n * @return {Object} Queue object with `add` and `flush` methods.\n */\nexport const createQueue = () => {\n\tconst waitingList = [];\n\tconst elementsMap = new WeakMap();\n\tlet isRunning = false;\n\n\tconst runWaitingList = ( deadline ) => {\n\t\tdo {\n\t\t\tif ( waitingList.length === 0 ) {\n\t\t\t\tisRunning = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextElement = waitingList.shift();\n\t\t\telementsMap.get( nextElement )();\n\t\t\telementsMap.delete( nextElement );\n\t\t} while ( deadline && deadline.timeRemaining && deadline.timeRemaining() > 0 );\n\n\t\trequestIdleCallback( runWaitingList );\n\t};\n\n\tconst add = ( element, item ) => {\n\t\tif ( ! elementsMap.has( element ) ) {\n\t\t\twaitingList.push( element );\n\t\t}\n\t\telementsMap.set( element, item );\n\t\tif ( ! isRunning ) {\n\t\t\tisRunning = true;\n\t\t\trequestIdleCallback( runWaitingList );\n\t\t}\n\t};\n\n\tconst flush = ( element ) => {\n\t\tif ( ! elementsMap.has( element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\telementsMap.delete( element );\n\t\tconst index = waitingList.indexOf( element );\n\t\twaitingList.splice( index, 1 );\n\n\t\treturn true;\n\t};\n\n\treturn {\n\t\tadd,\n\t\tflush,\n\t};\n};\n"],"sourceRoot":""}