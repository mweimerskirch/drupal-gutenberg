this.wp=this.wp||{},this.wp.editWidgets=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=219)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},15:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},2:function(e,t){!function(){e.exports=this.lodash}()},21:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(38);function i(e,t){if(null==e)return{};var n,i,c=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}},219:function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"setupWidgetAreas",function(){return m}),n.d(r,"updateBlocksInWidgetArea",function(){return y}),n.d(r,"saveWidgetAreas",function(){return A});var i={};n.d(i,"getWidgetAreas",function(){return k}),n.d(i,"getWidgetArea",function(){return x}),n.d(i,"getBlocksFromWidgetArea",function(){return _});var c=n(0),a=n(93),o=n(26),u=n(60);Object(o.addFilter)("editor.MediaUpload","core/edit-widgets/replace-media-upload",function(){return u.MediaUpload});var s=n(4),l=n(35),d=n(15),f=n(8),p=n(2);var b=Object(s.combineReducers)({widgetAreas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SETUP_WIDGET_AREAS":return Object(p.mapValues)(Object(p.keyBy)(t.widgetAreas,"id"),function(e){return Object(p.pick)(e,["name","id","description"])})}return e},widgetAreaBlocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SETUP_WIDGET_AREAS":return Object(p.mapValues)(Object(p.keyBy)(t.widgetAreas,"id"),function(e){return e.blocks});case"UPDATE_BLOCKS_IN_WIDGET_AREA":return(e[t.widgetAreaId]||[])===t.blocks?e:Object(f.a)({},e,Object(d.a)({},t.widgetAreaId,t.blocks))}return e}}),g=n(22),O=n.n(g),v=n(21),j=n(9),h=O.a.mark(m),w=O.a.mark(A);function m(){var e;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.select)("core","getEntityRecords","root","widgetArea");case 2:return e=t.sent,t.next=5,{type:"SETUP_WIDGET_AREAS",widgetAreas:Object(p.map)(e,function(e){var t=e.content,n=Object(v.a)(e,["content"]);return Object(f.a)({},n,{blocks:Object(j.parse)(Object(p.get)(t,["raw"],""))})})};case 5:case"end":return t.stop()}},h)}function y(e){return{type:"UPDATE_BLOCKS_IN_WIDGET_AREA",widgetAreaId:e,blocks:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}function A(){var e,t,n,r,i,c,a,o,u;return O.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.select)("core/edit-widgets","getWidgetAreas");case 2:e=s.sent,t=!0,n=!1,r=void 0,s.prev=6,i=e[Symbol.iterator]();case 8:if(t=(c=i.next()).done){s.next=19;break}return a=c.value,o=a.id,s.next=13,Object(l.select)("core/edit-widgets","getBlocksFromWidgetArea",o);case 13:return u=s.sent,s.next=16,Object(l.dispatch)("core","saveWidgetArea",{id:o,content:Object(j.serialize)(u)});case 16:t=!0,s.next=8;break;case 19:s.next=25;break;case 21:s.prev=21,s.t0=s.catch(6),n=!0,r=s.t0;case 25:s.prev=25,s.prev=26,t||null==i.return||i.return();case 28:if(s.prev=28,!n){s.next=31;break}throw r;case 31:return s.finish(28);case 32:return s.finish(25);case 33:case"end":return s.stop()}},w,null,[[6,21,25,33],[26,,28,32]])}var E=n(31),k=Object(E.a)(function(e){return Object(p.toArray)(e.widgetAreas)},function(e){return[e.widgetAreas]});function x(e,t){return e.widgetAreas[t]}function _(e,t){return e.widgetAreaBlocks[t]}var W=Object(s.registerStore)("core/edit-widgets",{reducer:b,actions:r,selectors:i,controls:l.controls});W.dispatch({type:"INIT"});var B=n(6),S=n(1),P=n(3),I=n(42),D=n(24);var T=function(){var e=Object(c.useState)(!1),t=Object(D.a)(e,2),n=t[0],r=t[1],i=Object(s.useDispatch)("core/edit-widgets").saveWidgetAreas,a=Object(c.useCallback)(Object(I.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,i();case 3:r(!1);case 4:case"end":return e.stop()}},e)})),[]);return Object(c.createElement)(P.Button,{isPrimary:!0,isLarge:!0,isBusy:n,"aria-disabled":n,onClick:n?void 0:a},Object(S.__)("Update"))};var U=function(){return Object(c.createElement)("div",{className:"edit-widgets-header",role:"region","aria-label":Object(S.__)("Widgets screen top bar"),tabIndex:"-1"},Object(c.createElement)("h1",{className:"edit-widgets-header__title"},Object(S.__)("Block Areas")," ",Object(S.__)("(experimental)")),Object(c.createElement)("div",{className:"edit-widgets-header__actions"},Object(c.createElement)(T,null)))};var M=function(){return Object(c.createElement)("div",{className:"edit-widgets-sidebar",role:"region","aria-label":Object(S.__)("Widgets advanced settings"),tabIndex:"-1"},Object(c.createElement)(P.Panel,{header:Object(S.__)("Block Areas")}))},N=n(7);var R=Object(B.compose)([Object(s.withSelect)(function(e,t){var n=t.id,r=e("core/edit-widgets"),i=r.getBlocksFromWidgetArea,c=r.getWidgetArea,a=e("core").canUser;return{blocks:i(n),widgetAreaName:(c(n)||{}).name,hasUploadPermissions:Object(p.defaultTo)(a("create","media"),!0)}}),Object(s.withDispatch)(function(e,t){var n=t.id;return{updateBlocks:function(t){(0,e("core/edit-widgets").updateBlocksInWidgetArea)(n,t)}}})])(function(e){var t=e.blockEditorSettings,n=e.blocks,r=e.initialOpen,i=e.updateBlocks,a=e.widgetAreaName,o=e.hasUploadPermissions,s=Object(c.useMemo)(function(){return function(e,t){return t?Object(f.a)({},e,{__experimentalMediaUpload:function(t){var n=t.onError,r=Object(v.a)(t,["onError"]);Object(u.uploadMedia)(Object(f.a)({wpAllowedMimeTypes:e.allowedMimeTypes,onError:function(e){var t=e.message;return n(t)}},r))}}):e}(t,o)},[t,o]);return Object(c.createElement)(P.Panel,{className:"edit-widgets-widget-area"},Object(c.createElement)(P.PanelBody,{title:a,initialOpen:r},Object(c.createElement)(N.BlockEditorProvider,{value:n,onInput:i,onChange:i,settings:s},Object(c.createElement)(N.BlockList,null))))});var C=Object(B.compose)([Object(s.withSelect)(function(e){return{areas:(0,e("core/edit-widgets").getWidgetAreas)()}})])(function(e){var t=e.areas,n=e.blockEditorSettings;return t.map(function(e,t){var r=e.id;return Object(c.createElement)(R,{blockEditorSettings:n,key:r,id:r,initialOpen:0===t})})});var F=Object(P.navigateRegions)(function(e){var t=e.blockEditorSettings;return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(U,null),Object(c.createElement)(M,null),Object(c.createElement)("div",{className:"edit-widgets-layout__content",role:"region","aria-label":Object(S.__)("Widgets screen content"),tabIndex:"-1"},Object(c.createElement)(C,{blockEditorSettings:t})))});var G=Object(B.compose)([Object(s.withDispatch)(function(e){return{setupWidgetAreas:e("core/edit-widgets").setupWidgetAreas}})])(function(e){var t=e.setupWidgetAreas,n=e.settings;return Object(c.useEffect)(function(){t()},[]),Object(c.createElement)(F,{blockEditorSettings:n})});function L(e,t){Object(a.registerCoreBlocks)(),Object(c.render)(Object(c.createElement)(G,{settings:t}),document.getElementById(e))}n.d(t,"initialize",function(){return L})},22:function(e,t){!function(){e.exports=this.regeneratorRuntime}()},24:function(e,t,n){"use strict";var r=n(37);var i=n(36);function c(e,t){return Object(r.a)(e)||function(e,t){var n=[],r=!0,i=!1,c=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw c}}return n}(e,t)||Object(i.a)()}n.d(t,"a",function(){return c})},26:function(e,t){!function(){e.exports=this.wp.hooks}()},3:function(e,t){!function(){e.exports=this.wp.components}()},31:function(e,t,n){"use strict";var r,i;function c(e){return[e]}function a(e){return!!e&&"object"==typeof e}function o(){var e={clear:function(){e.head=null}};return e}function u(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}r={},i="undefined"!=typeof WeakMap,t.a=function(e,t){var n,s;function l(){n=i?new WeakMap:o()}function d(){var n,r,i,c,a,o=arguments.length;for(c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];for(a=t.apply(null,c),(n=s(a)).isUniqueByDependants||(n.lastDependants&&!u(a,n.lastDependants,0)&&n.clear(),n.lastDependants=a),r=n.head;r;){if(u(r.args,c,1))return r!==n.head&&(r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=n.head,r.prev=null,n.head.prev=r,n.head=r),r.val;r=r.next}return r={val:e.apply(null,c)},c[0]=null,r.args=c,n.head&&(n.head.prev=r,r.next=n.head),n.head=r,r.val}return t||(t=c),s=i?function(e){var t,i,c,u,s=n,l=!0;for(t=0;t<e.length;t++){if(!a(i=e[t])){l=!1;break}s.has(i)?s=s.get(i):(c=new WeakMap,s.set(i,c),s=c)}return s.has(r)||((u=o()).isUniqueByDependants=l,s.set(r,u)),s.get(r)}:function(){return n},d.getDependants=t,d.clear=l,l(),d}},35:function(e,t){!function(){e.exports=this.wp.dataControls}()},36:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",function(){return r})},37:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",function(){return r})},38:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",function(){return r})},4:function(e,t){!function(){e.exports=this.wp.data}()},42:function(e,t,n){"use strict";function r(e,t,n,r,i,c,a){try{var o=e[c](a),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,c){var a=e.apply(t,n);function o(e){r(a,i,c,o,u,"next",e)}function u(e){r(a,i,c,o,u,"throw",e)}o(void 0)})}}n.d(t,"a",function(){return i})},6:function(e,t){!function(){e.exports=this.wp.compose}()},60:function(e,t){!function(){e.exports=this.wp.mediaUtils}()},7:function(e,t){!function(){e.exports=this.wp.blockEditor}()},8:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(15);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Object(r.a)(e,t,n[t])})}return e}},9:function(e,t){!function(){e.exports=this.wp.blocks}()},93:function(e,t){!function(){e.exports=this.wp.blockLibrary}()}});